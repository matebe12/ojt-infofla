-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- CORP_TABLE Table Create SQL
CREATE TABLE CORP_TABLE
(
    `CORP_ID`         INT            NOT NULL    AUTO_INCREMENT, 
    `CORP_NAME`       VARCHAR(45)    NOT NULL, 
    `COMPANY_REG_NO`  VARCHAR(45)    NOT NULL, 
    `CREATED_DT`      VARCHAR(45)    NULL, 
    `UPDATED_DT`      VARCHAR(45)    NULL, 
    PRIMARY KEY (CORP_ID)
);


-- CORP_TABLE Table Create SQL
CREATE TABLE USER_TABLE
(
    `USER_NO`     INT             NOT NULL    AUTO_INCREMENT COMMENT '유저 고유 넘버', 
    `USER_ID`     VARCHAR(45)     NOT NULL    COMMENT '유저 아이디', 
    `USER_PW`     VARCHAR(300)    NOT NULL, 
    `USER_NM`     VARCHAR(45)     NULL, 
    `USER_EMAIL`  VARCHAR(45)     NULL, 
    `USER_PHONE`  VARCHAR(45)     NULL, 
    `CREATED_DT`  VARCHAR(45)     NULL, 
    `UPDATED_DT`  VARCHAR(45)     NULL, 
    `USER_CORP`   INT             NULL, 
    PRIMARY KEY (USER_NO)
);

ALTER TABLE USER_TABLE COMMENT '유저 테이블';

ALTER TABLE USER_TABLE
    ADD CONSTRAINT FK_USER_TABLE_USER_CORP_CORP_TABLE_CORP_ID FOREIGN KEY (USER_CORP)
        REFERENCES CORP_TABLE (CORP_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- CORP_TABLE Table Create SQL
CREATE TABLE POST_TABLE
(
    `POST_NO`        INT             NOT NULL    AUTO_INCREMENT, 
    `POST_TITLE`     VARCHAR(100)    NOT NULL, 
    `POST_CONTENT`   LONGTEXT        NOT NULL, 
    `POST_FILES`     VARCHAR(200)    NULL, 
    `POST_WRITER`    VARCHAR(45)     NOT NULL, 
    `POST_PARENT`    INT             NULL, 
    `POST_CATEGORY`  VARCHAR(45)     NOT NULL, 
    `CREATED_DT`     VARCHAR(45)     NULL, 
    `UPDATED_DT`     VARCHAR(45)     NULL, 
    PRIMARY KEY (POST_NO)
);

ALTER TABLE POST_TABLE
    ADD CONSTRAINT FK_POST_TABLE_POST_PARENT_POST_TABLE_POST_NO FOREIGN KEY (POST_PARENT)
        REFERENCES POST_TABLE (POST_NO) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE POST_TABLE
    ADD CONSTRAINT FK_POST_TABLE_POST_WRITER_USER_TABLE_USER_ID FOREIGN KEY (POST_WRITER)
        REFERENCES USER_TABLE (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;


